<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rekap Presensi Harian</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="style.css">
  <!-- PERBAIKAN: Menambahkan 'version query' untuk cache busting -->
  <link rel="stylesheet" href="rekap.css?v=1.1">
  <style>
    /* Styles for Peta Modal */
    .modal {
      display: none; 
      position: fixed; 
      z-index: 1000; 
      left: 0;
      top: 0;
      width: 100%; 
      height: 100%; 
      overflow: auto; 
      background-color: rgba(0,0,0,0.5); 
      align-items: center;
      justify-content: center;
    }
    .modal-content {
      background-color: #fefefe;
      margin: auto;
      padding: 20px;
      border: 1px solid #888;
      width: 90%;
      max-width: 800px;
      border-radius: 8px;
      position: relative;
      display: flex;
      flex-direction: column;
    }
    .close-modal {
      color: #aaa;
      align-self: flex-end;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
      margin-bottom: 10px;
    }
    .close-modal:hover,
    .close-modal:focus {
      color: black;
      text-decoration: none;
      cursor: pointer;
    }
    iframe.peta-frame {
      width: 100%;
      height: 500px;
      border: none;
    }
    .btn-peta {
      background-color: #800000;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9em;
    }
    .btn-peta:hover {
      background-color: #138496;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 id="rekap-title">Rekap Presensi Harian</h1>

    <div class="lkh-alert">
      Silahkan mengisi Laporan Kinerja Harian (LKH) <a href="https://forms.gle/6EDvQK4diUWAirhU8" target="_blank" rel="noopener noreferrer">DI SINI</a> setelah selesai mengisi presensi Pulang atau Dinas Luar. Status pengisian Laporan Kinerja Harian perhari dapat dilihat pada kolom LKH.
    </div>

    <div class="table-container">
      <table id="rekap-table">
        <thead>
          <tr>
            <th>WAKTU</th>
            <th>KEHADIRAN</th>
            <th>NAMA PEGAWAI</th>
            <th>LOKASI</th>
            <th>LKH</th>
            <th>PETA</th>
            <th>JAM PULANG</th>
          </tr>
        </thead>
        <tbody>
          <!-- Data akan dimasukkan di sini oleh rekap.js -->
        </tbody>
      </table>
    </div>
    <div id="loading-spinner">
      <i class="fa-solid fa-spinner fa-spin"></i> Memuat data...
    </div>
  </div>

  <!-- Modal Peta -->
  <div id="petaModal" class="modal">
    <div class="modal-content">
      <span class="close-modal">&times;</span>
      <iframe id="petaFrame" class="peta-frame" src=""></iframe>
    </div>
  </div>

  <footer>
    KPU Kabupaten Nganjuk &copy; <span id="current-year"></span>
  </footer>
  <script src="rekap.js"></script>
</body>
</html>
